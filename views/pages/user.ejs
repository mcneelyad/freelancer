<!DOCTYPE html>
<html lang="en">

<head>
    <%- include("../partials/head"); -%>
</head>

<body class="container">

    <%- include("../partials/header"); -%>

    <main>
        <div class="jumbotron">
            <div class="container">
                <h3>Account Details</h3>
                <br>
                <div class="form-inline">
                    <p class="font-style-bold">Profile Details</p>
                    <button type="button" class="btn btn-sm" data-toggle="modal"
                        data-target="#editUserDetailsModal" style="float: right; margin-top: -1rem;">
                        <i class="fas fa-pencil-alt"></i>
                    </button>
                </div>
                <hr>
                <div class="row">
                    <div class="col-md-4">
                        <img src="https://randomuser.me/api/portraits/men/75.jpg" class="img-fluid img-thumbnail rounded mx-auto d-block" alt="profile pic">
                    </div>
                    <div class="col-md-8">
                        <div class="font-style-bold">
                            <%= firstName %> <%= lastName %>
                            <span class="font-size-small">(<%= username %>)</span>
                        </div>
                        <p><%= email %></p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-md-6">
                        <p class="font-weight-bold">Ideas I'm interested in</p>
                        <div class="myInterests">
                            <% if (userInterests) { %>
                                <% for(var i=0; i < userInterests.length; i++) { %>
                                    <% if (username == userInterests[i].username) { %> 
                                        <ul class="list-group">
                                            <li class="list-group-item"><a href="/ideas/<%= userInterests[i].post_id %>"><%= userInterests[i].post_title %> </a></li>
                                        </ul>
                                    <% } %> 
                                <% } %>
                            <% } else { %>
                                <p>You have no interests</p>
                            <% } %>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <p class="font-weight-bold">My Ideas</p>
                        <div class="myIdeas">
                            <% if (posts) { %>
                                <% for(var i=0; i < posts.length; i++) { %>
                                    <% if (username == posts[i].posted_by) { %> 
                                        <ul class="list-group">
                                            <li class="list-group-item"><a href="/ideas/<%= posts[i]._id %>"><%= posts[i].title %> </a></li>
                                        </ul>
                                    <% } %> 
                                <% } %>
                            <% } else { %>
                                <p>You have no ideas yet!</p>
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>

            <%- include("../modals/edit_user_details.ejs"); -%>
    </main>

    <%- include("../partials/footer"); -%>

</body>

</html>